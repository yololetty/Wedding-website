<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>蜜酱婚礼策划首页</title>
    <link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/common.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/header.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/about.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/footer.css" />
    <link href="https://fonts.googleapis.com/css?family=Charmonman|Courgette|Dancing+Script|Gloria+Hallelujah|Great+Vibes|Indie+Flower|Kaushan+Script|Lobster|Mali|Pacifico|Parisienne|Satisfy" rel="stylesheet">
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
</head>
<body>
    <!-- 引入头部 -->
    <div id="headerpage"></div>
    <!-- 中间自适应部分 -->
    <div id="section">
        <div class="intro">
            <h1 class="title-head">About Us</h1>
            <h2>Welcome To Our Website</h2>
            <h5>欢迎来到我的网站，这是本人多个人格完成的团队项目。</h5>
            <p>她们之间合作默契，能够高效完成婚礼策划。每一个idea都非同凡响，独一无二，你可以在森林深处的木屋里完成爱的仪式，可以在大漠孤烟直的沙漠中牵手奔跑，更可以在雪山之巅感受充满爱的自然力量。不管你想要传统的在亲友们的见证下的爱情还是俩人自己陷入浓情蜜恋中，在此郑重说明，在你给的所有条件下一定给你清新脱俗，欲仙欲死，无与伦比的婚礼。滴滴滴滴，编不下去了（本人更是看不下去了，先吐为快）。这里是陈以艾日常瞎闹篇，若文字引起不适，也不关我事，不不不我是说。。。。。。。真不关我事。。。嘻嘻嘻嘻嘻，难受了就到案例篇点那个小红心哈（相信我玩玩就开心了），别说找不到哦，自己瞎晃晃，肯定找得到的。</p>
        </div>
        <div class="skills">
            <h3 class="title-head">OUR SKILLS</h3>
            <canvas width="900px" height="20px" id="skills-text" style="margin: 0 auto">
                    您的浏览器版本过低，请升级！！！
            </canvas>
            <canvas width="900px" height="200px" id="skills" style="margin: 0 auto">
                您的浏览器版本过低，请升级！！！
            </canvas>
        </div>
        <div class="team">
            <div class="title-head">OUR TEAM</div>
            <div class="row">
                <div class="col-3">
                    <a href="/index.html" class="author" id="author1">
                        <img src="img/photo.jpg" title="你以为婚姻是爱情的坟墓">
                        <h3 class="work">WEB DESIGNER</h3>
                    </a>
                </div>
                <div class="col-3">
                    <a href="/case.html" class="author"  id="author2">
                        <img id="blur" src="img/photo.jpg" title="开始沉浸的爱情是雾里看花">
                        <h3 class="work">COPY PHOTO</h3>
                    </a>
                </div>
                <div class="col-3">
                    <a href="/video.html" class="author" id="author3">
                        <img id="sepia" src="img/photo.jpg" title="婚后的爱情是冷淡无味的">
                        <h3 class="work">COPY VIDEO</h3>
                    </a>
                </div>
                <div class="col-3">
                    <a href="/about.html" class="author" id="author4">
                        <img src="img/about-img.jpg" title="我想大概是酸甜苦辣都尝过">
                        <h3 class="work">WHAT YOU</h3>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <!--底部-->
    <div id="footerpage"></div>
    <script>
        $(function(){
            // 公用部分
            $("#headerpage").load("header.html");
            $("#footerpage").load("footer.html");
        });
        // 绘制圆角矩形函数
        CanvasRenderingContext2D.prototype.roundRect = function (x, y, w, h, r) {
            if (w < 2 * r) r = w / 2;
            if (h < 2 * r) r = h / 2;
            this.beginPath();
            this.moveTo(x+r, y);
            this.arcTo(x+w, y, x+w, y+h, r);
            this.arcTo(x+w, y+h, x, y+h, r);
            this.arcTo(x, y+h, x, y, r);
            this.arcTo(x, y, x+w, y, r);
            // this.arcTo(x+r, y);
            this.closePath();
            return this;
        }
        // 创建移动文本和绘制数据量的矩形函数
        CanvasRenderingContext2D.prototype.moveTxt = function(str){
            // 检测文本长度
            var obj = this.measureText(str);
            var w = obj.width;
            var h = obj.height;
            this.font = "16px sans-serif";
            // 修改文本基线 默认alphabetic top
            this.textBaseline = "top";
            this.fillStyle = "#F2DB4E";
            // 设置文本颜色
            // 左右移动文本
            var x = 0;
            var xDirection = 1;
            var timer = setInterval(()=>{
                this.clearRect(0,0,1200,800);   //清空画布
                x += 1 * xDirection;
                if(x >= 800-w){
                    xDirection = -1;
                }else if(x <= 0){
                    xDirection = 1;
                }
                this.fillText(str,x,0);
            },10);
            return this;
        }
        
        CanvasRenderingContext2D.prototype.getValue = function(arr,){
            this.font = "20px sans-serif";
            // 修改文本基线 默认alphabetic top
            this.textBaseline = "top";
            for(var i=0;i<arr.length;i++){
                var item = arr[i];
                var x = 0;
                var y = i;
                if((60*i) > 150){
                    x = 500;
                    var num = 3;
                    y = i-num;
                }
                // this.fillRect(x,0 + 60*y,50,40);
                // 第二部分显示进度条整体为灰色
                this.fillStyle = "#EBEBEB";
                this.roundRect(50 + x,0 + 60*y,300,40,5).fill();
                // this.fillRect(50 + x,0 + 60*y,300,40);
                // 第三部分 （第一款的文字 以及 填充进度条）
                this.fillStyle = "#32DCA5";
                var pro = parseInt(item.value) * 3;
                this.roundRect(0 + x,0 + 60 * y,pro,40,5).fill();
                // this.fillRect(50 + x,0 + 60 * y,pro,40);
                // 第一框掌握技能数据量
                this.fillStyle = "#00D48E";
                this.roundRect(x,5 + 60*y,50,30,5).fill();
                // 最后一部分填充条上的文字
                this.fillStyle = "#fff";
                this.fillText(item.value,5 + x,5 + 60 *y);
                this.font = "16px sans-serif";
                this.fillText(item.skill,60 + x,8 + 60 * y);
            }
        }
        
        // 绘制文本
        var txt = document.getElementById("skills-text");
        var ctxT = txt.getContext("2d");
        var str = "以下使用canvas绘图（真诚的眼睛，不信你F12一下）";
        ctxT.moveTxt(str);

        // 创建每个技能数据量的数组
        var arr = [{skill:"HTML / CSS",value:"90%"},
        {skill:"JavaScript",value:"80%"},
        {skill:"Bootstrap",value:"70%"},
        {skill:"JQuery",value:"80%"},
        {skill:"Nodejs",value:"70%"},
        {skill:"MySQL",value:"65%"}];
        var skills = document.getElementById("skills");
        var ctxS = skills.getContext("2d");
        ctxS.getValue(arr);
        
        // 设置一个定时器
        // var timer = setTimeout(() => {
        //     $(".author").bind("mouseenter",function(){
        //         $(".desc").css("opacity",1);
        //     });
        //     $(".author").bind("mouseleave",function(){
        //         $(".desc").css("opacity",0);
        //     });
        // }, 10000);
        // 鼠标hover 延时事件
        (function($){
            $.fn.hoverDelay = function(options){
                var defaults = {
                    hoverDuring: 200,   //鼠标经过延时的时间
                    outDuring: 200,     //鼠标移出的延时时间
                    hoverEvent: function(){    //鼠标经过执行的方法
                        $.noop();
                    },
                    outEvent: function(){    //鼠标移出执行的方法
                        $.noop();    
                    }
                };
                var sets = $.extend(defaults,options || {});
                var hoverTimer, outTimer;
                return $(this).each(function(){
                    $(this).hover(function(){
                        clearTimeout(outTimer);
                        hoverTimer = setTimeout(sets.hoverEvent, sets.hoverDuring);
                    },function(){
                        clearTimeout(hoverTimer);
                        outTimer = setTimeout(sets.outEvent, sets.outDuring);
                    });    
                });
            }      
        })(jQuery);
        
        function deschover(id,$desc){
            $(id).hoverDelay({
                hoverDuring: 2500,
                outDuring : 10,
                hoverEvent: () => {
                    $(id).append($desc);
                    // console.log($("#author1").append($desc));
                    return $desc;
                },
                outEvent: () => {
                    $desc.remove();
                }
            });
        }
        var $desc1 = $("<div class='desc'><h3>Wedding</h3><span>但总有人能把婚姻经营成初始爱情的模样</span></div>");
        deschover("#author1",$desc1);
        
        var $desc2 = $("<div class='desc'><h3>Wedding</h3><span>婚姻却是拨开云雾见天日</span></div>");
        deschover("#author2",$desc2);

        var $desc3 = $("<div class='desc'><h3>Wedding</h3><span>有时还夹杂着苦涩味，但总归是两个人一起品尝</span></div>");
        deschover("#author3",$desc3);

        var $desc4 = $("<div class='desc'><h3>Wedding</h3><span>才尝出了最爱的那个味道吧</span></div>");
        deschover("#author4",$desc4)
        
    </script>
</body>
</html>